# 04.Vagrant

## OS installation

### Bash
```bash
mkdir 04.Vagrant
mkdir 1 2 new
cd 1
nano Vagrantfile
vagrant up
vagrant ssh
cd ../2
nano Vagrantfile
vagrant up
vagrant ssh
```

#### Vagrantfile /04.Vagrant/1/

```ruby
Vagrant.configure("2") do |config|
  config.vm.box = "bento/debian-10.7"
end
```
#### Vagrantfile /04.Vagrant/2/

```ruby
Vagrant.configure("2") do |config|
  config.vm.box = "bento/centos-8.3"
end
```

### Debian 10.7

```bash
sudo useradd updater -p vagrant
sudo visudo
```

```text
updater ALL=(ALL) NOPASSWD: ALL
```

```
sudo apt update -y
sudo apt install -y vim git wget curl mc htop iftop lsof
sudo -i
sudo apt upgrade -y
history > hist_file_deb.txt
rm -rf /var/lib/apt/lists/*  /tmp/*  /var/tmp/* /usr/share/man /usr/share/doc /usr/share/doc-base
cat /dev/null > ~/.bash_history && history -c && exit
logout
```

### CentOS 8.3

```bash
sudo useradd updater -p vagrant
sudo visudo
sudo yum install epel-release -y
sudo yum update -y
sudo yum install -y vim git wget curl mc htop iftop lsof
sudo -i
sudo yum upgrade -y
history > hist_file_cent.txt
rm -rf /var/lib/apt/lists/*  /tmp/*  /var/tmp/* /usr/share/man /usr/share/doc /usr/share/doc-base
cat /dev/null > ~/.bash_history && history -c && exit
```

## Vagrant cloud upload

### CentOS

```bash
vagrant package --output Centos-8.3.box
vagrant cloud auth login
vagrant cloud publish --release 911den/centos 8.3.1 virtualbox Centos-8.3.box
```

### Debian

```bash
vagrant package --output Debian-10.7.box
vagrant cloud auth login 
vagrant cloud publish --release 911den/deb 10.7.1 virtualbox Debian-10.7.box
```

## Links

### [CentOS 8.3](https://app.vagrantup.com/911den/boxes/centos/versions/8.3.1)

#### Vagrantfile

```ruby
Vagrant.configure("2") do |config|
  config.vm.box = "911den/centos"
  config.vm.box_version = "8.3.1"
end
```

#### NEW

```ruby
vagrant init 911den/centos \
  --box-version 8.3.1
vagrant up
```

### [Debian 10.7](https://app.vagrantup.com/911den/boxes/deb/versions/10.7.1)

#### Vagrantfile

```ruby
Vagrant.configure("2") do |config|
  config.vm.box = "911den/deb"
  config.vm.box_version = "10.7.1"
end
```

#### NEW

```ruby
vagrant init 911den/deb \
  --box-version 10.7.1
vagrant up
```
